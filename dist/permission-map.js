// Generated by CoffeeScript 1.10.0
(function() {
  var DEFAULT_TOKEN, Permission, _match, addToken, getToken, pathToRegExp;

  pathToRegExp = require('path-to-regexp');

  DEFAULT_TOKEN = '*';

  _match = function(path, perm) {
    return pathToRegExp(perm.path).test(path);
  };

  Permission = function(path, token) {
    return {
      path: path,
      token: token
    };
  };

  addToken = function(map, path, token) {
    return map.concat([Permission(path, token)]);
  };

  getToken = function(map, path) {
    var i, len, perm;
    for (i = 0, len = map.length; i < len; i++) {
      perm = map[i];
      if (_match(path, perm)) {
        return perm.token;
      }
    }
    return DEFAULT_TOKEN;
  };

  module.exports = {
    Permission: Permission,
    addToken: addToken,
    getToken: getToken
  };

}).call(this);
