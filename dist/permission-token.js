// Generated by CoffeeScript 1.10.0
(function() {
  var DEFAULT_ACTION, PermissionToken, _dropLastChar, actionOrDefault, addAction, getAction, getLastItem, hasAction, isAction;

  DEFAULT_ACTION = '*';

  PermissionToken = function(str) {
    return str;
  };

  _dropLastChar = function(str) {
    return str.substring(0, str.length - 1);
  };

  actionOrDefault = function(str, defaultAction) {
    if (defaultAction == null) {
      defaultAction = DEFAULT_ACTION;
    }
    if (isAction(str)) {
      return _dropLastChar(str);
    } else {
      return defaultAction;
    }
  };

  getLastItem = function(token) {
    return (token.split(':')).pop();
  };

  isAction = function(str) {
    return (str.substr(-1)) === '!';
  };

  hasAction = function(token) {
    return isAction(getLastItem(token));
  };

  getAction = function(token, defaultAction) {
    if (defaultAction == null) {
      defaultAction = DEFAULT_ACTION;
    }
    return actionOrDefault(getLastItem(token), defaultAction);
  };

  addAction = function(token, action) {
    return token + ':' + action + '!';
  };

  module.exports = {
    PermissionToken: PermissionToken,
    getLastItem: getLastItem,
    isAction: isAction,
    hasAction: hasAction,
    getAction: getAction,
    addAction: addAction,
    actionOrDefault: actionOrDefault
  };

}).call(this);
