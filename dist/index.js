// Generated by CoffeeScript 1.10.0
(function() {
  var DEFAULT_ACTION, Map, PermissionMap, Token;

  Map = require('./permission-map');

  Token = require('./permission-token');

  DEFAULT_ACTION = '*';

  PermissionMap = (function() {
    function PermissionMap() {
      this.map = [];
    }

    PermissionMap.prototype.addToken = function(path, token) {
      this.map = Map.addToken(this.map, path, token);
      return this;
    };

    PermissionMap.prototype.getToken = function(path, action) {
      var token, tokenAction;
      token = Map.getToken(this.map, path);
      tokenAction = Token.getAction(token, action);
      return (tokenAction === action ? Token.addAction(token, action) : token).replace(/!/g, '');
    };

    return PermissionMap;

  })();

  module.exports = {
    Map: function() {
      return new PermissionMap();
    },
    Permission: Map.Permission
  };

}).call(this);
